{% extends 'base.html' %}

{% block title %}
Code Feed
{% endblock %}

{% block content %}
<a href="{% url 'code_feed:create' %}">코드 제출</a>
<a href="/code_feed/update/4/">업데이트</a>
<ul>
    {% for feed in feeds %}
        <li>
            <div>문제{{ feed.problem.title }}</div>
            <pre>
                <code class="python">{{ feed.content }}</code>
            </pre>
            <div>{{ feed.description }}</div>
            <div>작성자: {{ feed.author }}</div>
            <div>좋아요 수: {{ feed.likes__count }}</div>
            <form action="/code_feed/likes/{{ feed.id }}/" method="post">
                {% csrf_token %}
                <button type="submit">좋아요</button>
            </form>
            <form action="/code_feed/bookmarks/{{ feed.id }}/" method="post">
                {% csrf_token %}
            <button type="submit">북마크</button>
            </form>
        </li>
    {% endfor %}
</ul>
<!-- aria-label은 스크린 리더에게 네비게이션의 역할을 알려줍니다 -->
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        <!-- 첫 번째 페이지로 -->
        {% if feeds.has_previous %}
        <li class="page-item">
            <a class="page-link" href="?page=1">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <!-- tabindex를 -1로 주면 tab키를 사용한 접근을 막습니다. -->
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        {% endif %}
        <!-- 이전 페이지 버튼 -->
        {% if feeds.has_previous %}
        <li class="page-item">
            <a class="page-link" href="?page={{ feeds.number|add:-10 }}">
                <span aria-hidden="true">이전</span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">
                <span aria-hidden="true">이전</span>
            </a>
        </li>
        {% endif %}
        <!-- 모든 페이지 버튼 -->
        {% for page_number in page_range %}
        {% if page_number == feeds.number %}
        <li class="page-item active" aria-current="page">
            <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
        </li>
        {% else %}
        <li class="page-item">
            <a class="page-link" href="?page={{ page_number }}">{{ page_number }}</a>
        </li>
        {% endif %}
        {% endfor %}
        <!-- 페이지 건너뛰기 -->
        {% if feeds.has_next %}
        <li class="page-item">
            <a class="page-link" href="?page={{ feeds.number|add:10 }}">
                <span aria-hidden="true">다음</span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">
                <span aria-hidden="true">다음</span>
            </a>
        </li>
        {% endif %}
        <!-- 마지막 페이지  -->
        {% if feeds.has_next %}
        <li class="page-item">
            <a class="page-link" href="?page={{ feeds.paginator.num_pages }}">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endblock %}